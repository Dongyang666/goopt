#!/bin/sh

set -ev

make test

./testit | grep BOO
./testit | grep 'name is anonymous'
./testit | grep 'I am unhappy'

./testit --verbose | grep 'I am verbose'

./testit --undefined && exit 1

./testit --sad | grep unhappy
./testit --happy | grep 'am happy'
./testit -h | grep 'am happy'
./testit -u | grep 'am unhappy'
./testit -b boo | grep boo
./testit | grep 'very slow'
./testit --speed=fast | grep 'very fast'
./testit --velocity=medium | grep 'very medium'
./testit --velocity=mediu && exit 1

./testit --help | grep name=anonymous
./testit --help | grep ' -b BOO'
./testit --help | grep ' --unhappy, --sad'
./testit --help | grep '=.slow.medium.fast'

echo all tests passed!
